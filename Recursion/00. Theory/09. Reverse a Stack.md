## Lecture 9: Reverse a Stack in O(1) Space Using Recursion

### Reverse a Stack in O(1) Space Using Recursion (IBH Approach)

You can reverse a stack using recursion and only the stack itself (no extra data structures), by applying the Induction-Hypothesis-Base (IBH) method.

---

### Steps:

1. **Base Condition:**  
   If the stack is empty, return (nothing to reverse).

2. **Hypothesis:**  
   Assume you can reverse the smaller stack (after popping the top).

3. **Induction:**  
   Pop the top element, recursively reverse the rest of the stack, then insert the popped element at the bottom of the stack.

---

### C++ Code:

```cpp
#include <iostream>
#include <stack>
using namespace std;

// Helper function to insert an element at the bottom of the stack
void insertAtBottom(stack<int>& s, int x) {
    if (s.empty()) {
        s.push(x);
        return;
    }
    int temp = s.top();
    s.pop();
    insertAtBottom(s, x);
    s.push(temp);
}

// Recursive function to reverse the stack
void reverseStack(stack<int>& s) {
    if (s.empty()) return; // Base case
    int temp = s.top();
    s.pop();
    reverseStack(s);           // Hypothesis: reverse the smaller stack
    insertAtBottom(s, temp);   // Induction: insert the popped element at the bottom
}

int main() {
    stack<int> s;
    s.push(4);
    s.push(1);
    s.push(3);
    s.push(2);

    reverseStack(s);

    cout << "Reversed stack: ";
    while (!s.empty()) {
        cout << s.top() << " ";
        s.pop();
    }
    return 0;
}
```
### Complexity Analysis

- **Time Complexity:**  
  `O(n^2)`, where `n` is the number of elements in the stack.  
  Each element is inserted at the bottom, which itself can take up to `O(n)` time for each of the `n` elements.

- **Space Complexity:**  
  `O(n)`, due to the recursion stack.  
  The maximum depth of recursion is equal to the number of elements in the stack.

### Why does this work?

- You reduce the problem size by one at each step (pop the top).
- You use the answer from the smaller problem (reversed smaller stack) to solve the bigger problem (insert the popped element at the bottom).
- You always stop at the base case (empty stack).

---

**In short:**

Use IBH to reverse a stack recursively:
1. Stop at the base case (empty stack),
2. Assume you can reverse a smaller stack,
3. Use that to reverse the full stack by inserting each popped element at the bottom.
